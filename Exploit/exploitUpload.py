import requests
import threading

def send_request(file_data):
    url = 'http://localhost:8080/upload/avatar'
    
    files = {
        'file': file_data['file'],
        'username': file_data['username'],
    }
    
    response = requests.post(url, files=files)
    
    print(f"Request for {file_data['username'][1]} completed with status code: {response.status_code}")
    print(response.text)

if __name__ == "__main__":
    # Dữ liệu cho các request
    file_data_list = [
        {
            'file': ('mmm.txt', 'fwq', 'image/png', {'Content-Disposition': 'form-data; name="file"; filename="mmm.txt"'}),
            'username': (None, 'null', 'text/plain', {'Content-Disposition': 'form-data; name="username"'}),
        },
    ]

    threads = []
    
    for i in range(10000):
        for file_data in file_data_list:
            thread = threading.Thread(target=send_request, args=(file_data,))
            threads.append(thread)
            thread.start()
    
    for thread in threads:
        thread.join()
